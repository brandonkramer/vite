"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const h=require("crypto"),r=require("path"),d=require("fs"),u=require("fast-glob");function v(t){const e={banner:"(function(){",footer:"})();",...t};return{name:"rollup-encapsulate-bundles",generateBundle(s,n){for(const a of Object.values(n))a.type==="chunk"&&(a.code=e.banner+a.code+e.footer)}}}function j(t){let e;const s={hash:!0,rules:{images:/png|jpe?g|svg|gif|tiff|bmp|ico/i,svg:/png|jpe?g|svg|gif|tiff|bmp|ico/i,fonts:/ttf|woff|woff2/i},...t};return{name:"rollup-copy-asset-files",configResolved(n){e=n},async buildStart(){const n=o=>h.createHash("sha256").update(o).digest("hex").slice(0,8),a=(o={})=>{const l=[e.root,...u.sync(r.resolve(e.root,"**/*"),{onlyDirectories:!0})];for(const c of l)for(const[i,m]of Object.entries(s.rules))i in o||(o[i]=[]),o[i]=[...o[i],...u.sync(r.resolve(c,i,"**/*"))];return o};for(const[o,l]of Object.entries(a()))l.map(c=>{const i=c.split("/"+o+"/")[1],m=c.split(e.root+"/")[1],f=i.lastIndexOf("."),p=i.substring(f+1),y=i.substring(0,f);if(p!==""&&s.rules[o].test(p)){const g={type:"asset",fileName:s.hash?o+"/"+y+"."+n(i)+"."+p:o+"/"+y+"."+p,source:d.readFileSync(c),name:m};this.emitFile(g)}})}}}function x(t){const e={dirname:"",buildPath:"",emptyDirs:["css","js","svg","images","fonts"],...t};return{name:"rollup-empty-dirs",async buildStart(){for(const s of e.emptyDirs)await(n=>{d.existsSync(n)&&(d.rmSync(n,{recursive:!0}),console.log("deleted "+n))})(r.resolve(e.dirname,e.buildPath,s))}}}function w(t){const e={path:"*",...t};return{name:"vite-handle-hot-update",handleHotUpdate({file:s,server:n}){s.endsWith(".php")&&n.ws.send({type:"full-reload",path:e.path})}}}function O(t){const e={isDev:!1,root:"src",outDir:"build",entry:!1,dirname:process.cwd(),css:{entries:!0,extension:"pcss"},...t};return{name:"vite-config-base",config:(s,{command:n,mode:a})=>({root:e.root,server:{host:"0.0.0.0",port:3e3,watch:{usePolling:!0}},css:{postcss:"./postcss.config.js",devSourcemap:!0},esbuild:{loader:"jsx",include:new RegExp(`/${e.root.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}/.*\\.js$`),exclude:[]},optimizeDeps:{esbuildOptions:{loader:{".js":"jsx"}}},build:{manifest:!0,target:"es2015",minify:a==="development"?!1:"esbuild",sourcemap:a==="development",outDir:"../"+e.outDir,commonjsOptions:{transformMixedEsModules:!0},rollupOptions:{input:(()=>{const o=u.sync(typeof e.entry=="string"?r.resolve(e.dirname,e.root,"../",e.root,"**/",e.entry,"*/*.js"):r.resolve(e.dirname,e.root,"*","*.js")),l=u.sync(typeof e.entry=="string"?r.resolve(e.dirname,e.root,"../",e.root,"**/",e.entry,"*/*."+e.css.extension):r.resolve(e.dirname,e.root,"*","*."+e.css.extension));return e.css.entries?[...o,...l]:o})(),output:{entryFileNames:o=>"js/[name].[hash].js",assetFileNames:o=>{let l=o.name.split(".")[1];return/png|jpe?g|svg|gif|tiff|bmp|ico/i.test(l)?"images/[name][extname]":l+"/[name].[hash][extname]"}}}}})}}function b(t){return t.replace(/-([a-z])/g,(e,s)=>s.toUpperCase())}function D(){return{...{jquery:"jQuery",tinymce:"tinymce",moment:"moment",react:"React","react-dom":"ReactDOM",backbone:"Backbone",lodash:"lodash"},...Object.fromEntries(["a11y","annotations","api-fetch","autop","blob","block-directory","block-editor","block-library","block-serialization-default-parser","blocks","components","compose","core-data","data","data-controls","date","deprecated","dom","dom-ready","edit-post","editor","element","escape-html","format-library","hooks","html-entities","i18n","is-shallow-equal","keyboard-shortcuts","keycodes","list-reusable-blocks","media-utils","notices","nux","plugins","primitives","priority-queue","redux-routine","reusable-blocks","rich-text","server-side-render","shortcode","token-list","url","viewport","warning","wordcount"].map(s=>[`@wordpress/${s}`,`wp.${b(s)}`]))}}const k=t=>({root:t.root,server:{host:"0.0.0.0",port:3e3,watch:{usePolling:!0}},css:{postcss:"./postcss.config.js",devSourcemap:!0},esbuild:{loader:"jsx",include:new RegExp(`/${t.root.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}/.*\\.js$`),exclude:[]},optimizeDeps:{esbuildOptions:{loader:{".js":"jsx"}}},build:{manifest:!0,target:"es2015",minify:t.isDev?!1:"esbuild",sourcemap:t.isDev,outDir:"../"+t.outDir,commonjsOptions:{transformMixedEsModules:!0},rollupOptions:{input:(()=>{const e=u.sync(t.hasOwnProperty("entry")?r.resolve(t.dirname,t.root,"../",t.root,"**/",t.entry,"*/*.js"):r.resolve(t.dirname,t.root,"*","*.js")),s=t.hasOwnProperty("cssExtension")?t.cssExtension:"pcss",n=u.sync(t.hasOwnProperty("entry")?r.resolve(t.dirname,t.root,"../",t.root,"**/",t.entry,"*/*."+s):r.resolve(t.dirname,t.root,"*","*."+s));return t.hasOwnProperty("cssEntries")&&!t.cssEntries?e:[...e,...n]})(),output:{entryFileNames:e=>"js/[name].[hash].js",assetFileNames:e=>{let s=e.name.split(".")[1];return/png|jpe?g|svg|gif|tiff|bmp|ico/i.test(s)?"images/[name][extname]":s+"/[name].[hash][extname]"}}}}});exports.baseConfig=k;exports.kebabToCamelCase=b;exports.rollUpCopyAssets=j;exports.rollupEmptyDirs=x;exports.rollupEncapsulateBundles=v;exports.viteConfigBase=O;exports.viteHandleHotUpdate=w;exports.wpGlobals=D;

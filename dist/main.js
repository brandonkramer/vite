"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const h=require("crypto"),r=require("path"),d=require("fs"),l=require("fast-glob");function v(t){const e={banner:"(function(){",footer:"})();",...t};return{name:"rollup-encapsulate-bundles",generateBundle(s,o){for(const i of Object.values(o))i.type==="chunk"&&(i.code=e.banner+i.code+e.footer)}}}function j(t){let e;const s={hash:!0,rules:{images:/png|jpe?g|svg|gif|tiff|bmp|ico/i,svg:/png|jpe?g|svg|gif|tiff|bmp|ico/i,fonts:/ttf|woff|woff2/i},...t};return{name:"rollup-copy-asset-files",configResolved(o){e=o},async buildStart(){const o=n=>h.createHash("sha256").update(n).digest("hex").slice(0,8),i=(n={})=>{const p=[e.root,...l.sync(r.resolve(e.root,"**/*"),{onlyDirectories:!0})];for(const u of p)for(const[a,m]of Object.entries(s.rules))a in n||(n[a]=[]),n[a]=[...n[a],...l.sync(r.resolve(u,a,"**/*"))];return n};for(const[n,p]of Object.entries(i()))p.map(u=>{const a=u.split("/"+n+"/")[1],m=u.split(e.root+"/")[1],f=a.lastIndexOf("."),c=a.substring(f+1),y=a.substring(0,f);if(c!==""&&s.rules[n].test(c)){const g={type:"asset",fileName:s.hash?n+"/"+y+"."+o(a)+"."+c:n+"/"+y+"."+c,source:d.readFileSync(u),name:m};this.emitFile(g)}})}}}function x(t){const e={dirname:"",buildPath:"",emptyDirs:["css","js","svg","images","fonts"],...t};return{name:"rollup-empty-dirs",async buildStart(){for(const s of e.emptyDirs)await(o=>{d.existsSync(o)&&(d.rmSync(o,{recursive:!0}),console.log("deleted "+o))})(r.resolve(e.dirname,e.buildPath,s))}}}function w(t){const e={path:"*",...t};return{name:"vite-handle-hot-update",handleHotUpdate({file:s,server:o}){s.endsWith(".php")&&o.ws.send({type:"full-reload",path:e.path})}}}function D(t){const e={isDev:!1,root:"src",outDir:"build",entry:!1,dirname:"",css:{entries:!0,extension:"pcss"},...t},s={root:e.root,server:{host:"0.0.0.0",port:3e3,watch:{usePolling:!0}},css:{postcss:"./postcss.config.js",devSourcemap:!0},esbuild:{loader:"jsx",include:new RegExp(`/${e.root.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}/.*\\.js$`),exclude:[]},optimizeDeps:{esbuildOptions:{loader:{".js":"jsx"}}},build:{manifest:!0,target:"es2015",minify:e.isDev?!1:"esbuild",sourcemap:e.isDev,outDir:"../"+e.outDir,commonjsOptions:{transformMixedEsModules:!0},rollupOptions:{input:(()=>{const o=l.sync(typeof e.entry=="string"?r.resolve(e.dirname,e.root,"../",e.root,"**/",e.entry,"*/*.js"):r.resolve(e.dirname,e.root,"*","*.js")),i=l.sync(typeof e.entry=="string"?r.resolve(e.dirname,e.root,"../",e.root,"**/",e.entry,"*/*."+e.css.extension):r.resolve(e.dirname,e.root,"*","*."+e.css.extension));return e.css.entries?[...o,...i]:o})(),output:{entryFileNames:o=>"js/[name].[hash].js",assetFileNames:o=>{let i=o.name.split(".")[1];return/png|jpe?g|svg|gif|tiff|bmp|ico/i.test(i)?"images/[name][extname]":i+"/[name].[hash][extname]"}}}}};return{name:"vite-config-base",config(){return s}}}function b(t){return t.replace(/-([a-z])/g,(e,s)=>s.toUpperCase())}function O(){return{...{jquery:"jQuery",tinymce:"tinymce",moment:"moment",react:"React","react-dom":"ReactDOM",backbone:"Backbone",lodash:"lodash"},...Object.fromEntries(["a11y","annotations","api-fetch","autop","blob","block-directory","block-editor","block-library","block-serialization-default-parser","blocks","components","compose","core-data","data","data-controls","date","deprecated","dom","dom-ready","edit-post","editor","element","escape-html","format-library","hooks","html-entities","i18n","is-shallow-equal","keyboard-shortcuts","keycodes","list-reusable-blocks","media-utils","notices","nux","plugins","primitives","priority-queue","redux-routine","reusable-blocks","rich-text","server-side-render","shortcode","token-list","url","viewport","warning","wordcount"].map(s=>[`@wordpress/${s}`,`wp.${b(s)}`]))}}const k=t=>({root:t.root,server:{host:"0.0.0.0",port:3e3,watch:{usePolling:!0}},css:{postcss:"./postcss.config.js",devSourcemap:!0},esbuild:{loader:"jsx",include:new RegExp(`/${t.root.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}/.*\\.js$`),exclude:[]},optimizeDeps:{esbuildOptions:{loader:{".js":"jsx"}}},build:{manifest:!0,target:"es2015",minify:t.isDev?!1:"esbuild",sourcemap:t.isDev,outDir:"../"+t.outDir,commonjsOptions:{transformMixedEsModules:!0},rollupOptions:{input:(()=>{const e=l.sync(t.hasOwnProperty("entry")?r.resolve(t.dirname,t.root,"../",t.root,"**/",t.entry,"*/*.js"):r.resolve(t.dirname,t.root,"*","*.js")),s=t.hasOwnProperty("cssExtension")?t.cssExtension:"pcss",o=l.sync(t.hasOwnProperty("entry")?r.resolve(t.dirname,t.root,"../",t.root,"**/",t.entry,"*/*."+s):r.resolve(t.dirname,t.root,"*","*."+s));return t.hasOwnProperty("cssEntries")&&!t.cssEntries?e:[...e,...o]})(),output:{entryFileNames:e=>"js/[name].[hash].js",assetFileNames:e=>{let s=e.name.split(".")[1];return/png|jpe?g|svg|gif|tiff|bmp|ico/i.test(s)?"images/[name][extname]":s+"/[name].[hash][extname]"}}}}});exports.baseConfig=k;exports.kebabToCamelCase=b;exports.rollUpCopyAssets=j;exports.rollupEmptyDirs=x;exports.rollupEncapsulateBundles=v;exports.viteConfigBase=D;exports.viteHandleHotUpdate=w;exports.wpGlobals=O;

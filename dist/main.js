"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const h=require("crypto"),a=require("path"),d=require("fs"),p=require("fast-glob");function v(s){const e={banner:"(function(){",footer:"})();",...s};return{name:"rollup-encapsulate-bundles",generateBundle(o,r){for(const i of Object.values(r))i.type==="chunk"&&(i.code=e.banner+i.code+e.footer)}}}function j(s){let e;const o={hash:!0,rules:{images:/png|jpe?g|svg|gif|tiff|bmp|ico/i,svg:/png|jpe?g|svg|gif|tiff|bmp|ico/i,fonts:/ttf|woff|woff2/i},...s};return{name:"rollup-copy-asset-files",configResolved(r){e=r},async buildStart(){const r=t=>h.createHash("sha256").update(t).digest("hex").slice(0,8),i=(t={})=>{const l=[e.root,...p.sync(a.resolve(e.root,"**/*"),{onlyDirectories:!0})];for(const c of l)for(const[n,f]of Object.entries(o.rules))n in t||(t[n]=[]),t[n]=[...t[n],...p.sync(a.resolve(c,n,"**/*"))];return t};for(const[t,l]of Object.entries(i()))l.map(c=>{const n=c.split("/"+t+"/")[1],f=c.split(e.root+"/")[1],m=n.lastIndexOf("."),u=n.substring(m+1),b=n.substring(0,m);if(u!==""&&o.rules[t].test(u)){const g={type:"asset",fileName:o.hash?t+"/"+b+"."+r(n)+"."+u:t+"/"+b+"."+u,source:d.readFileSync(c),name:f};this.emitFile(g)}})}}}function x(s){const e={dirname:"",buildPath:"",emptyDirs:["css","js","svg","images","fonts"],...s};return{name:"rollup-empty-dirs",async buildStart(){for(const o of e.emptyDirs)await(r=>{d.existsSync(r)&&(d.rmSync(r,{recursive:!0}),console.log("deleted "+r))})(a.resolve(e.dirname,e.buildPath,o))}}}function w(s){const e={path:"*",...s};return{name:"vite-handle-hot-update",handleHotUpdate({file:o,server:r}){o.endsWith(".php")&&r.ws.send({type:"full-reload",path:e.path})}}}function k(s){const e={isDev:!1,root:"src",outDir:"build",entry:!1,dirname:process.cwd(),css:{entries:!0,extension:"pcss"},...s};return{name:"vite-config-base",config:(o,{command:r,mode:i})=>({root:e.root,server:{host:"0.0.0.0",port:3e3,watch:{usePolling:!0}},css:{postcss:"./postcss.config.js",devSourcemap:!0},esbuild:{loader:"jsx",include:new RegExp(`/${e.root.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}/.*\\.js$`),exclude:[]},optimizeDeps:{esbuildOptions:{loader:{".js":"jsx"}}},build:{manifest:!0,target:"es2015",minify:i==="development"?!1:"esbuild",sourcemap:i==="development",outDir:"../"+e.outDir,commonjsOptions:{transformMixedEsModules:!0},rollupOptions:{input:(()=>{const t=p.sync(typeof e.entry=="string"?a.resolve(e.dirname,e.root,"../",e.root,"**/",e.entry,"*/*.js"):a.resolve(e.dirname,e.root,"*","*.js")),l=p.sync(typeof e.entry=="string"?a.resolve(e.dirname,e.root,"../",e.root,"**/",e.entry,"*/*."+e.css.extension):a.resolve(e.dirname,e.root,"*","*."+e.css.extension));return e.css.entries?[...t,...l]:t})(),output:{entryFileNames:t=>"js/[name].[hash].js",assetFileNames:t=>{let l=t.name.split(".")[1];return/png|jpe?g|svg|gif|tiff|bmp|ico/i.test(l)?"images/[name][extname]":l+"/[name].[hash][extname]"}}}}})}}function y(s){return s.replace(/-([a-z])/g,(e,o)=>o.toUpperCase())}function D(){return{...{jquery:"jQuery",tinymce:"tinymce",moment:"moment",react:"React","react-dom":"ReactDOM",backbone:"Backbone",lodash:"lodash"},...Object.fromEntries(["a11y","annotations","api-fetch","autop","blob","block-directory","block-editor","block-library","block-serialization-default-parser","blocks","components","compose","core-data","data","data-controls","date","deprecated","dom","dom-ready","edit-post","editor","element","escape-html","format-library","hooks","html-entities","i18n","is-shallow-equal","keyboard-shortcuts","keycodes","list-reusable-blocks","media-utils","notices","nux","plugins","primitives","priority-queue","redux-routine","reusable-blocks","rich-text","server-side-render","shortcode","token-list","url","viewport","warning","wordcount"].map(o=>[`@wordpress/${o}`,`wp.${y(o)}`]))}}exports.kebabToCamelCase=y;exports.rollUpCopyAssets=j;exports.rollupEmptyDirs=x;exports.rollupEncapsulateBundles=v;exports.viteConfigBase=k;exports.viteHandleHotUpdate=w;exports.wpGlobals=D;
